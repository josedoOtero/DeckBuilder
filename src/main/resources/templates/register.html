<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Crear cuenta</title>

    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/css/form_login.css}" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        /* Forzar columna dentro de cada campo */
        .field-group {
            display: flex;
            flex-direction: column;
            width: 100%;
        }

        .error-container {
            min-height: 18px;
            margin-top: 4px;
        }

        .field-error {
            color: #dc3545;
            font-size: 0.8rem;
            line-height: 1.1;
        }

        .is-invalid {
            border-color: #dc3545;
        }
    </style>
</head>

<body>

<div class="bg-slideshow">
    <div class="slide slide1"></div>
    <div class="slide slide2"></div>
    <div class="slide slide3"></div>
    <div class="slide slide4"></div>
</div>

<div class="bg-dark-layer"></div>

<div class="center-container">
    <div class="auth-card">

        <h2 class="auth-title">Crear cuenta</h2>

        <form th:action="@{/login/crearCuenta}" th:object="${usuario}" method="post" novalidate>

            <!-- NOMBRE -->
            <div class="form-row mb-3">
                <label>Nombre</label>

                <div class="field-group">
                    <input type="text"
                           th:field="*{nombre}"
                           class="form-control"
                           th:classappend="${#fields.hasErrors('nombre')} ? 'is-invalid' : ''">

                    <div class="error-container">
                        <span class="field-error"
                              th:if="${#fields.hasErrors('nombre')}"
                              th:errors="*{nombre}">
                        </span>
                    </div>
                </div>
            </div>

            <!-- EMAIL -->
            <div class="form-row mb-3">
                <label>Email</label>

                <div class="field-group">
                    <input type="email"
                           th:field="*{email}"
                           class="form-control"
                           th:classappend="${#fields.hasErrors('email')} ? 'is-invalid' : ''">

                    <div class="error-container">
                        <span class="field-error"
                              th:if="${#fields.hasErrors('email')}"
                              th:errors="*{email}">
                        </span>
                    </div>
                </div>
            </div>

            <!-- PASSWORD -->
            <div class="form-row mb-3">
                <label>Contraseña</label>

                <div class="field-group">
                    <input type="password"
                           th:field="*{password}"
                           class="form-control"
                           th:classappend="${#fields.hasErrors('password')} ? 'is-invalid' : ''">

                    <div class="error-container">
                        <span class="field-error"
                              th:if="${#fields.hasErrors('password')}"
                              th:errors="*{password}">
                        </span>
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-primary mt-2 w-100">
                Crear cuenta
            </button>
        </form>

        <p th:if="${error}" class="msg-error">
            <span th:text="${error}"></span>
        </p>

        <p th:if="${exito}" class="msg-success">
            <span th:text="${exito}"></span>
        </p>

        <p class="text-center text-light small mt-4 mb-2 opacity-75">
            ¿Ya tienes una cuenta?
        </p>

        <div class="d-flex justify-content-between align-items-center mt-2">

            <a th:href="@{/}" class="text-light text-decoration-none small d-flex align-items-center gap-1 opacity-75">
                <i class="bi bi-arrow-left"></i>
                Inicio
            </a>

            <a th:href="@{/login/iniciarSesion}" class="text-white fw-semibold text-decoration-none">
                Iniciar sesión
            </a>

        </div>

    </div>
</div>

<script th:src="@{/js/bootstrap.bundle.min.js}"></script>

</body>
</html>